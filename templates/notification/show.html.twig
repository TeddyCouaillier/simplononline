{% extends 'base.html.twig' %}

{% import 'macro.html.twig' as template %}

{% block title %}Liens d'aide{% endblock %}

{% block body %}
    {{ template.deleteConfirm('delete-all',path('user_delete_all_notif'), 'Toutes vos notifications seront supprim√©es')}}
    <div class="flex just-between align-center">
        <h1>Vos notifications</h1>
        <i data-toggle="modal" data-target="#modal-delete-all" class="fal fa-times-circle icon-md pointer rhover"></i>
    </div>
    <hr>
    <div class="container-grey">
        {% for unotif in app.user.notifReceived %}
            {% set notif = unotif.notification %}
            {{ template.deleteConfirm(unotif.id,path('user_delete_notif',{'id': unotif.id}))}}
            {% if unotif.seen == false %}
                <div class="rounded p-2 flex align-center my-1 shadow w-100 bg-red text-white text-center notifs">
                    <div class="text-left">
                        {{ notif.title }}
                        <span class="text-black ml-2">
                            par {{ notif.sender.firstname|capitalize }} {{ notif.sender.lastname|slice(0,1)|upper }}.
                        </span>
                    </div>
                    <div><span class="text-small">{{ notif.interval }}</span></div>
                    <div>
                    {% if notif.type == 1 or notif.type == 2 %}
                    <a href="{{ path('project_show',{'slug': notif.target}) }}?seen={{unotif.id}}" class="btn btn-light text-red"><i class="far fa-arrow-circle-right"></i></a>
                    {% elseif notif.type == 3 %}
                    <a href="{{ path('user_show',{'id': notif.target}) }}?seen={{unotif.id}}" class="btn btn-light text-red"><i class="far fa-arrow-circle-right"></i></a>
                    {% else %}
                    <a href="{{ path('file_user_show') }}?seen={{unotif.id}}" class="btn btn-light text-red"><i class="far fa-arrow-circle-right"></i></a>
                    {% endif %}
                    </div>
                    <div><i data-toggle="modal" data-target="#modal-{{unotif.id}}" class="fal fa-times-circle pointer rhover"></i></div>
                </div>
            {% else %}
                <div class="container-white flex align-center my-1 shadow w-100 text-center notifs">
                    <div class="text-left">
                        {{ notif.title }}
                        <span class="text-grey ml-2">
                            par {{ notif.sender.firstname|capitalize }} {{ notif.sender.lastname|slice(0,1)|upper }}.
                        </span>
                    </div>
                    <div><span class="text-small text-grey">{{ notif.interval }}</span></div>
                    <div>
                    {% if notif.type == 1 or notif.type == 2 %}
                    <a href="{{ path('project_show',{'slug': notif.target}) }}?" class="btn btn-danger text-white"><i class="far fa-arrow-circle-right"></i></a>
                    {% elseif notif.type == 3 %}
                    <a href="{{ path('user_show',{'id': notif.target}) }}#skills" class="btn btn-danger text-white"><i class="far fa-arrow-circle-right"></i></a>
                    {% else %}
                    <a href="{{ path('file_user_show') }}" class="btn btn-danger text-white"><i class="far fa-arrow-circle-right"></i></a>
                    {% endif %}
                    </div>
                    <div><i data-toggle="modal" data-target="#modal-{{unotif.id}}" class="fal fa-times-circle pointer"></i></div>
                </div>
            {% endif %}
        {% else %}
            <div class="text-center py-2">
                <i class="fal fa-times-hexagon icon-sm"></i><br>
                <span class="bold">Aucune notification</span>
            </div>
        {% endfor %}
    </div>
{% endblock %}