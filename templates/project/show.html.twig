{% extends 'base.html.twig' %}

{% import 'macro.html.twig' as template %}

{% block title %}{{ project.title }}{% endblock %}

{% block stylesheets %}
<link href="https://unpkg.com/multiple-select@1.3.1/dist/multiple-select.css" rel="stylesheet">
<link rel="stylesheet" href="/css/project.css">
{% endblock %}

{# {% form_theme form 'project/_collection.html.twig' %} #}

{% block body %}
    <div class="px-5">
        <div class="flex just-between">
            <h1>{{ project.title }}</h1>
            {% if is_granted('ROLE_ADMIN') %}
            <a href="{{ path('project_edit',{'slug': project.slug}) }}" class="button-edit"><i class="fal fa-pen bold"></i></a>
            {% endif %}
        </div>
        <span class="text-grey">{{ project.description|default('<em>Pas de description</em>')|raw }}</span>
        <div class="flex mt-2 mb-3">
            {% for user in project.users %}
                <img src="/img/avatar/{{user.avatar}}" class="avatar-xs" data-toggle="tooltip" data-placement="top" title="{{user.fullname}}">
            {% endfor %}
        </div>
        <div class="progress">
            <div class="progress-bar bg-success" role="progressbar" style="width: 25%;" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
        </div>
        <div class="flex just-between">
            <div>
                {% if project.github != null %}
                <a href="{{ project.github  }}" target="_blank" class="text-grey text-small"><i class="far fa-code-branch"></i> GitHub</a> &nbsp;
                {% endif %}
                {% if project.website != null %}
                <a href="{{ project.website }}" target="_blank" class="text-grey text-small"><i class="far fa-eye"></i> Voir le site</a>
                {% endif %}
            </div>
            <div class="text-grey text-small">
                <span>{{ project.interval }}</span>
            </div>
        </div>
        <div class="container-grey flex my-4">
            <div class="text-center project-nav active" data-project="task" onclick="projectPanel(this)">Tâches</div>
            <div class="text-center project-nav" data-project="detail" onclick="projectPanel(this)">Informations détaillées</div>
            <div class="text-center project-nav" data-project="activity" onclick="projectPanel(this)">Activité</div>
        </div>
        <hr>
        {{ include('project/_task.html.twig') }}
        {{ include('project/_detail.html.twig') }}
        {{ include('project/_activity.html.twig') }}
    </div>

    {{ form(form) }}
{% endblock %}

{% block libraries %}
<script src="https://unpkg.com/multiple-select@1.3.1/dist/multiple-select.js"></script>
{% endblock %}